{"version":3,"sources":["scripts/moveBalls.js"],"names":["mbId","video","document","getElementById","vballs","querySelectorAll","moveOnce","arr","x","y","_step","_iterator","_createForOfIteratorHelper","s","n","done","el","value","window","innerWidth","style","transform","Math","random","err","e","f","moveBalls","section","setInterval","addEventListener","stopBalls","once","clearInterval","console","log","_step2","_iterator2","_loop","transition","setTimeout","video2","vballsYtb","btn1","querySelector","btn2","stopBallsByBtn","mbIdAftMod","_step3","_iterator3","_loop2","vcont","btn","modal","videoJS","onclick","display","play","event","target","pause","classList","remove","add","animationPlayState","videoLocal","moveOnceAftMod","_step4","_iterator4","currentBalls","observerMob","IntersectionObserver","entries","forEach","entry","isIntersecting","observe"],"mappings":"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","file":"moveBalls.14c4d67f.js","sourceRoot":"../../src","sourcesContent":["// \n// Анимация движения шаров для секции Video - при наведении на неё указателя мыши\n// \n\n\n// if (window.innerWidth >= 1024) {\n\nconst video = document.getElementById('video');\nconst vballs = document.querySelectorAll('.video__ball');\n\n// задаём функцию для передвижения объектов массива на заданное расстояние (в rem)\n// Math.floor() для округления до меньшего целого - можно не использовать\nfunction moveOnce(arr, x, y) {\n    for (let el of arr) {\n        if (window.innerWidth < 768) {\n            el.style.transform = 'translate(' + (Math.random() * (2 * x) - x) + 'rem, ' + (Math.random() * (2 * y) - y) + 'rem) ' + 'scale(' + (0.2 + Math.random() * 0.5) + ')';\n        } else {\n            el.style.transform = 'translate(' + (Math.random() * (2 * x) - x) + 'rem, ' + (Math.random() * (2 * y) - y) + 'rem) ' + 'scale(' + (0.4 + Math.random() * 1.1) + ')';\n        }\n    }\n}\n\n// задаём переменную в которую будем сохранять \"идентификатор для регулярного запуска функции\" moveBalls - идентификатор возвращает функция setInterval() -, чтобы потом можно было остановить её повторяющееся выполнение через clearInterval(). При вызове clearInterval() браузер найдёт таймер (из список активных таймеров браузера) по идентификатору и уберёт его из списка - повторение функции moveBalls прекратится.\nlet mbId;\n\n// Создаём функцию с однократным запуском перемещения элементов и регулярным её перезапуском каждые 4000мс\nfunction moveBalls(section, arr, x, y) {\n    moveOnce(arr, x, y);\n    mbId = setInterval(moveOnce, 4000, arr, x, y);\n\n    // вешаем листнер на остановку анимации. Благодаря опции  { once: true }  - обработчик сработает один раз, а затем автоматически удалится. ({ once: true } можно даже использовать с анонимными функциями и не нужно будет очищать обработчик  - он удалится автоматически.)\n    section.addEventListener('mouseleave', () => { stopBalls(section, arr) }, { once: true });\n}\n\n// Создаём функцию, которая остановит регулярный перезапуск moveOnce. - Функции clearInterval() передаём аргументом идентификатор регулярного перезапуска функции - идентификатором, который возвращает функция setInterval() - мы его сохранили в переменную mbId\nfunction stopBalls(section, arr) {\n    // прервали повторение выполнения функции перемещения элементов moveOnce\n    clearInterval(mbId);\n    console.log(\"stopBalls runs and clearInterval(mbId)\")\n\n    for (let el of arr) {\n        //  зададём продолжительность transition 0.5s для  элементов - чтобы плавно но быстро вернуть их в начальное место.\n        el.style.transition = 'all 0.5s linear';\n\n        //  для каждой ширины экрана возвращаем начальные свойства transform  для элементов\n        if (window.innerWidth < 425) {\n            el.style.transform = 'translate(0, 0) scale(0.35)';\n        } else {\n            if (window.innerWidth < 768) {\n                el.style.transform = 'translate(0, 0) scale(0.5)';\n            } else {\n                if (window.innerWidth < 1024) {\n                    el.style.transform = 'translate(0, 0) scale(0.75)';\n                } else {\n\n                    el.style.transform = 'translate(0, 0)';\n                }\n            }\n        }\n        // после выполнения остального js кода - возвращаем изначальное значение transition = 12s для всех элементов - чтоб при следующих запусках перемещений элементы двигались с изначально заданной скоростью.\n        //  Хотя transition =  12s присваивается элементам ещё в момент анимации с transition = 0.5s  - анимация всё равно продолжается время 0.5s - как это было указано во время начала анимации\n        setTimeout(\n            () => {\n                el.style.transition = 'all 12s linear';\n            }\n            , 16)\n    }\n\n    // вешаем листнер на старт анимации. Благодаря опции  { once: true }  - обработчик сработает один раз, а затем автоматически удалится.\n    section.addEventListener('mouseenter', () => { moveBalls(section, arr, 80, 40) }, { once: true });\n}\n\n// вешаем первоначальный (после загрузки страницы) листнер на старт анимации. Благодаря опции  { once: true }  - обработчик сработает один раз, а затем автоматически удалится. (убрать листнер  с функцией с аргументами  через removeEventListener - не получается, внутрь безымянной функции-обёртки класть не стал)\nvideo.addEventListener('mouseenter', () => { moveBalls(video, vballs, 80, 40) }, { once: true });\n\n// не экономя память - просто вешаем листнеры\n// video.addEventListener('mouseenter', () => { moveBalls(vballs, 80, 40) });\n// вешаем листнер для остановки анимации.\n// video.addEventListener('mouseleave', () => { stopBalls(vballs) });\n\n// добавляем анимацию на второй блок с видео с id=\"video2\"\n\nconst video2 = document.getElementById('video2');\nconst vballsYtb = document.querySelectorAll('.video__ball_ytb');\n\nvideo2.addEventListener('mouseenter', () => { moveBalls(video2, vballsYtb, 80, 40) }, { once: true })\n\n\n\n\n\n// остановливаем анимацию движения шаров после нажатия  на кнопку воспроизведения видео\nconst btn1 = document.querySelector('.video__btn');\nconst btn2 = document.querySelector('.video__btn_2');\n\nfunction stopBallsByBtn(arr) {\n    clearInterval(mbId);\n    clearInterval(mbIdAftMod); //останавливаем движение запущенное закрытием модального окна\n    for (let el of arr) {\n        el.style.transition = 'all 0.5s linear';\n        if (window.innerWidth < 425) {\n            el.style.transform = 'translate(0, 0) scale(0.35)';\n        } else {\n            if (window.innerWidth < 768) {\n                el.style.transform = 'translate(0, 0) scale(0.5)';\n            } else {\n                if (window.innerWidth < 1024) {\n                    el.style.transform = 'translate(0, 0) scale(0.75)';\n                } else {\n\n                    el.style.transform = 'translate(0, 0)';\n                }\n            }\n        };\n        setTimeout(() => {\n            el.style.transition = 'all 12s linear';\n        }, 16)\n    };\n}\n\nbtn1.addEventListener('click', () => {\n    stopBallsByBtn(vballs);\n});\nbtn2.addEventListener('click', () => {\n    stopBallsByBtn(vballsYtb);\n});\n\n// }\n// , { once: true }\n\n\n// \n// from file ShowVideo.js\nconst vcont = document.querySelector('.video-cnt');\nconst btn = document.querySelector('.video__btn');\nconst modal = document.querySelector('.video__mov');\nconst videoJS = document.querySelector('.video__clip');\n\nbtn.onclick = () => {\n    // vcont.style.display = 'none';\n    // modal.classList.add('video__mov_in')\n    modal.style.display = 'flex';\n    setTimeout(() => {\n        videoJS.play();\n    }, 600);\n}\n\nlet mbIdAftMod;\n\nmodal.onclick = (event) => {\n    if (event.target === modal) {\n        videoJS.pause();  // - !! из-за этого не работает закрытие видео с youtube (во frame-е).\n        // .stop() - такого метода нет. video.stop();\n        // video.style.display = 'none';\n        videoJS.classList.remove('video__clip_in');\n        videoJS.classList.add('video__clip_out');\n\n        // сначала скрываем элемент, а затем показываем для срабатывания анимации. Можно также через js запустить старт анимации (.animationPlayState = 'running') после смены классов с анимацией\n        // setTimeout(() => {\n        //     video.style.display = 'block';\n        // }, 0);\n\n        videoJS.style.animationPlayState = 'running';\n        // нет необхдимости скрывать показывать элемент для запуска анимации - запускаем анимацию с помощью css свойства animation-play-state: running; (в JS - .animationPlayState = 'running')\n\n        // возвращаем нужные классы с анимацией и скрываем элемент родитель (контейнер). задержка 0.5 секунды - точно как продолжительность анимации\n        setTimeout(() => {\n            videoJS.classList.remove('video__clip_out');\n            videoJS.classList.add('video__clip_in');\n            modal.style.display = 'none';\n        }, 500);\n\n\n\n\n        // возобновляем движение после закрытия модала. Т.к. пишем в разных файлах - некоторые переменые с объектами и части функций задаём и пишем заново и/или повторно \n        const videoLocal = document.getElementById('video');\n        const vballs = document.querySelectorAll('.video__ball');\n        function moveOnceAftMod(arr, x, y) {\n            for (let el of arr) {\n                if (window.innerWidth < 768) {\n                    el.style.transform = 'translate(' + (Math.random() * (2 * x) - x) + 'rem, ' + (Math.random() * (2 * y) - y) + 'rem) ' + 'scale(' + (0.2 + Math.random() * 0.5) + ')';\n                } else {\n                    el.style.transform = 'translate(' + (Math.random() * (2 * x) - x) + 'rem, ' + (Math.random() * (2 * y) - y) + 'rem) ' + 'scale(' + (0.4 + Math.random() * 1.1) + ')';\n                }\n            }\n        }\n\n        function moveBallsAftMod(section, arr, x, y) {\n            setTimeout(() => {\n                moveOnceAftMod(arr, x, y);\n            }, 500);\n            mbIdAftMod = setInterval(moveOnceAftMod, 4000, arr, x, y);\n            section.addEventListener('mouseleave', () => { stopBallsAftMod(section, arr) }, { once: true });\n        }\n\n        function stopBallsAftMod(section, arr) {\n            clearInterval(mbIdAftMod);\n            console.log(\"stopBallsAftMod runs and clearInterval(mbIdAftMod)\")\n\n        }\n\n        moveBallsAftMod(videoLocal, vballs, 80, 40);\n\n\n    }\n\n}\n\n\n// стартуем движение шаров при попадании в область видимости на мобильных\n\n// https://stackoverflow.com/questions/56324813/how-to-detect-touch-device-in-2019\n\n// function isTouchDevice() {\n//     return (('ontouchstart' in window) ||\n//        (navigator.maxTouchPoints > 0) ||\n//        (navigator.msMaxTouchPoints > 0));\n//   }\n\n// // .window перед matchMedia() - не обязательно\n// if (matchMedia('(hover: hover)').matches) {\n//     console.log(\"matchMedia('(hover: hover)')\");\n// }\n\n// if (window.matchMedia('(pointer: coarse)').matches) {\n//     // touchscreen\n\n//     // @media(hover: none) and(pointer: coarse) {\n//     //     /* touchscreens */\n//     // }\n//     // @media(hover: none) and(pointer: fine) {\n//     //     /* stylus */\n//     // }\n//     // @media(hover: hover) and(pointer: coarse) {\n//     //     /* controllers */\n//     // }\n//     // @media(hover: hover) and(pointer: fine) {\n//     //     /* mouse or touchpad */\n//     // }\n// }\n\n// if (window.matchMedia('(hover: none)').matches) {\n\nvideo.currentBalls = vballs;\n// console.log(video.currentBalls);\nvideo2.currentBalls = vballsYtb;\n// console.log(video2.currentBalls);\n\nconst observerMob = new IntersectionObserver(\n    function (entries) {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting === true) {\n\n                // глючило и запускало moveBalls когда секция уже была в области видимости - чтобы точно избежать такого поведения - оставляем принудительную остановку анимации \n                stopBalls(entry.target, entry.target.currentBalls)\n                console.log(entry.target);\n                console.log('stopBalls()');\n                // чтобы успело примениться transition к шарикам (entry.target.currentBalls)\n                setTimeout(() => {\n                    moveBalls(entry.target, entry.target.currentBalls, 80, 40);\n                    // Убрать вешание листнеров в конце функций;  и вешать их  только если есть ховер\n                    console.log(entry.target);\n                    console.log('start moveBalls()');\n                }, 33);\n\n            } else {\n                stopBalls(entry.target, entry.target.currentBalls)\n                console.log(entry.target);\n                console.log('stopBalls()');\n            }\n        }\n        )\n    }\n)\n\n\nobserverMob.observe(video);\nobserverMob.observe(video2);\n// }"]}