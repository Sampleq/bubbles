{"version":3,"sources":["scripts/moveBalls.js"],"names":["window","innerWidth","mbId","video","document","getElementById","vballs","querySelectorAll","moveOnce","arr","x","y","_step","_iterator","_createForOfIteratorHelper","s","n","done","value","style","transform","Math","random","err","e","f","moveBalls","section","setInterval","addEventListener","stopBalls","once","clearInterval","console","log","_step2","_iterator2","_loop","el","transition","setTimeout","video2","vballsYtb","btn1","querySelector","btn2","stopBallsByBtn","mbIdAftMod","_step3","_iterator3","_loop2","vcont","btn","modal","videoJS","onclick","display","play","event","target","pause","classList","remove","add","animationPlayState","videoLocal","moveOnceAftMod","_step4","_iterator4"],"mappings":"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","file":"moveBalls.8eba2ad5.js","sourceRoot":"../../../src","sourcesContent":["// \n// Анимация движения шаров для секции Video - при наведении на неё указателя мыши\n// \n\n\nif (window.innerWidth >= 1024) {\n\n    const video = document.getElementById('video');\n    const vballs = document.querySelectorAll('.video__ball');\n\n    // задаём функцию для передвижения объектов массива на заданное расстояние (в rem)\n    // Math.floor() для округления до меньшего целого - можно не использовать\n    function moveOnce(arr, x, y) {\n        for (let el of arr) {\n            el.style.transform = 'translate(' + (Math.random() * (2 * x) - x) + 'rem, ' + (Math.random() * (2 * y) - y) + 'rem) ' + 'scale(' + (0.4 + Math.random() * 1.1) + ')';\n        }\n    }\n\n    // задаём переменную в которую будем сохранять \"идентификатор для регулярного запуска функции\" moveBalls - идентификатор возвращает функция setInterval() -, чтобы потом можно было остановить её повторяющееся выполнение через clearInterval(). При вызове clearInterval() браузер найдёт таймер (из список активных таймеров браузера) по идентификатору и уберёт его из списка - повторение функции moveBalls прекратится.\n    let mbId;\n\n    // Создаём функцию с однократным запуском перемещения элементов и регулярным её перезапуском каждые 4000мс\n    function moveBalls(section, arr, x, y) {\n        moveOnce(arr, x, y);\n        mbId = setInterval(moveOnce, 4000, arr, x, y);\n\n        // вешаем листнер на остановку анимации. Благодаря опции  { once: true }  - обработчик сработает один раз, а затем автоматически удалится. ({ once: true } можно даже использовать с анонимными функциями и не нужно будет очищать обработчик  - он удалится автоматически.)\n        section.addEventListener('mouseleave', () => { stopBalls(section, arr) }, { once: true });\n    }\n\n    // Создаём функцию, которая остановит регулярный перезапуск moveOnce. - Функции clearInterval() передаём аргументом идентификатор регулярного перезапуска функции - идентификатором, который возвращает функция setInterval() - мы его сохранили в переменную mbId\n    function stopBalls(section, arr) {\n        // прервали повторение выполнения функции перемещения элементов moveOnce\n        clearInterval(mbId);\n        console.log(\"stopBalls runs and clearInterval(mbId)\")\n\n        for (let el of arr) {\n            //  зададём продолжительность transition 0.5s для  элементов - чтобы плавно но быстро вернуть их в начальное место.\n            el.style.transition = 'all 0.5s linear';\n\n            //  для каждой ширины экрана возвращаем начальные свойства transform  для элементов\n            // if (window.innerWidth < 425) {\n            //     el.style.transform = 'translate(0, 0) scale(0.35)';\n            // } else {\n            //     if (window.innerWidth < 768) {\n            //         el.style.transform = 'translate(0, 0) scale(0.5)';\n            //     } else {\n            //         if (window.innerWidth < 1024) {\n            //             el.style.transform = 'translate(0, 0) scale(0.75)';\n            //         } else {\n\n            el.style.transform = 'translate(0, 0)';\n            //         }\n            //     }\n            // }\n            // после выполнения остального js кода - возвращаем изначальное значение transition = 12s для всех элементов - чтоб при следующих запусках перемещений элементы двигались с изначально заданной скоростью.\n            //  Хотя transition =  12s присваивается элементам ещё в момент анимации с transition = 0.5s  - анимация всё равно продолжается время 0.5s - как это было указано во время начала анимации\n            setTimeout(\n                () => {\n                    el.style.transition = 'all 12s linear';\n                }\n                , 16)\n        }\n\n        // вешаем листнер на старт анимации. Благодаря опции  { once: true }  - обработчик сработает один раз, а затем автоматически удалится.\n        section.addEventListener('mouseenter', () => { moveBalls(section, arr, 80, 40) }, { once: true });\n    }\n\n    // вешаем первоначальный (после загрузки страницы) листнер на старт анимации. Благодаря опции  { once: true }  - обработчик сработает один раз, а затем автоматически удалится. (убрать листнер  с функцией с аргументами  через removeEventListener - не получается, внутрь безымянной функции-обёртки класть не стал)\n    video.addEventListener('mouseenter', () => { moveBalls(video, vballs, 80, 40) }, { once: true });\n\n    // не экономя память - просто вешаем листнеры\n    // video.addEventListener('mouseenter', () => { moveBalls(vballs, 80, 40) });\n    // вешаем листнер для остановки анимации.\n    // video.addEventListener('mouseleave', () => { stopBalls(vballs) });\n\n    // добавляем анимацию на второй блок с видео с id=\"video2\"\n\n    const video2 = document.getElementById('video2');\n    const vballsYtb = document.querySelectorAll('.video__ball_ytb');\n\n    video2.addEventListener('mouseenter', () => { moveBalls(video2, vballsYtb, 80, 40) }, { once: true })\n\n\n\n\n\n    // остановливаем анимацию движения шаров после нажатия  на кнопку воспроизведения видео\n    const btn1 = document.querySelector('.video__btn');\n    const btn2 = document.querySelector('.video__btn_2');\n\n    function stopBallsByBtn(arr) {\n        clearInterval(mbId);\n        clearInterval(mbIdAftMod); //останавливаем движение запущенное закрытием модального окна\n        for (let el of arr) {\n            el.style.transition = 'all 0.5s linear';\n            el.style.transform = 'translate(0, 0)';\n            setTimeout(() => {\n                el.style.transition = 'all 12s linear';\n            }, 16)\n        };\n    }\n\n    btn1.addEventListener('click', () => {\n        stopBallsByBtn(vballs);\n    });\n    btn2.addEventListener('click', () => {\n        stopBallsByBtn(vballsYtb);\n    });\n\n}\n// , { once: true }\n\n\n// \n// from file ShowVideo.js\nconst vcont = document.querySelector('.video-cnt');\nconst btn = document.querySelector('.video__btn');\nconst modal = document.querySelector('.video__mov');\nconst videoJS = document.querySelector('.video__clip');\n\nbtn.onclick = () => {\n    // vcont.style.display = 'none';\n    // modal.classList.add('video__mov_in')\n    modal.style.display = 'flex';\n    setTimeout(() => {\n        videoJS.play();\n    }, 600);\n}\n\nlet mbIdAftMod;\n\nmodal.onclick = (event) => {\n    if (event.target === modal) {\n        videoJS.pause();  // - !! из-за этого не работает закрытие видео с youtube (во frame-е).\n        // .stop() - такого метода нет. video.stop();\n        // video.style.display = 'none';\n        videoJS.classList.remove('video__clip_in');\n        videoJS.classList.add('video__clip_out');\n\n        // сначала скрываем элемент, а затем показываем для срабатывания анимации. Можно также через js запустить старт анимации (.animationPlayState = 'running') после смены классов с анимацией\n        // setTimeout(() => {\n        //     video.style.display = 'block';\n        // }, 0);\n\n        videoJS.style.animationPlayState = 'running';\n        // нет необхдимости скрывать показывать элемент для запуска анимации - запускаем анимацию с помощью css свойства animation-play-state: running; (в JS - .animationPlayState = 'running')\n\n        // возвращаем нужные классы с анимацией и скрываем элемент родитель (контейнер). задержка 0.5 секунды - точно как продолжительность анимации\n        setTimeout(() => {\n            videoJS.classList.remove('video__clip_out');\n            videoJS.classList.add('video__clip_in');\n            modal.style.display = 'none';\n        }, 500);\n\n\n\n\n        // возобновляем движение после закрытия модала. Т.к. пишем в разных файлах - некоторые переменые с объектами и части функций задаём и пишем заново и/или повторно \n        const videoLocal = document.getElementById('video');\n        const vballs = document.querySelectorAll('.video__ball');\n        function moveOnceAftMod(arr, x, y) {\n            for (let el of arr) {\n                el.style.transform = 'translate(' + (Math.random() * (2 * x) - x) + 'rem, ' + (Math.random() * (2 * y) - y) + 'rem) ' + 'scale(' + (0.4 + Math.random() * 1.1) + ')';\n            }\n        }\n\n        function moveBallsAftMod(section, arr, x, y) {\n            setTimeout(() => {\n                moveOnceAftMod(arr, x, y);\n            }, 500);\n            mbIdAftMod = setInterval(moveOnceAftMod, 4000, arr, x, y);\n            section.addEventListener('mouseleave', () => { stopBallsAftMod(section, arr) }, { once: true });\n        }\n\n        function stopBallsAftMod(section, arr) {\n            clearInterval(mbIdAftMod);\n            console.log(\"stopBallsAftMod runs and clearInterval(mbIdAftMod)\")\n\n        }\n\n        moveBallsAftMod(videoLocal, vballs, 80, 40);\n\n\n    }\n\n}"]}